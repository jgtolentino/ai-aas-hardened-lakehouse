# Edge Functions Environment - Production

# Supabase Configuration
SUPABASE_URL=https://production-project.supabase.co
SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
SUPABASE_SERVICE_ROLE_KEY=${SUPABASE_SERVICE_ROLE_KEY}

# Database Connection
DATABASE_URL=postgresql://${DB_USER}:${DB_PASS}@db.production.supabase.co:5432/postgres?sslmode=require

# OpenAI Configuration
OPENAI_API_KEY=${OPENAI_API_KEY}
OPENAI_ORG_ID=${OPENAI_ORG_ID}

# Environment Settings
NODE_ENV=production
LOG_LEVEL=error
ENABLE_CORS=false

# Rate Limiting (strict)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=3000
RATE_LIMIT_REQUESTS_PER_DAY=50000
RATE_LIMIT_BURST_SIZE=10

# Cache Settings (Redis Sentinel)
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_REDIS_SENTINELS=redis-sentinel-1:26379,redis-sentinel-2:26379,redis-sentinel-3:26379
CACHE_REDIS_MASTER_NAME=scout-cache
CACHE_KEY_PREFIX=edge_prod_

# Feature Flags (production)
ENABLE_SYNTHETIC_DATA=false
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_PROFILING=false
ENABLE_BETA_FEATURES=false

# External Services
MAPBOX_TOKEN=${MAPBOX_TOKEN}
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_PROD}
PAGERDUTY_INTEGRATION_KEY=${PAGERDUTY_KEY_PROD}
SENTRY_DSN=${SENTRY_DSN_PROD}

# Security
API_KEY_ROTATION_DAYS=7
ENFORCE_HTTPS=true
ALLOWED_HOSTS=scout.example.com
CSP_DIRECTIVES="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data: https://api.mapbox.com"
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# Authentication
JWT_ALGORITHM=RS256
JWT_PUBLIC_KEY=${JWT_PUBLIC_KEY}
JWT_PRIVATE_KEY=${JWT_PRIVATE_KEY}
SESSION_TIMEOUT=1800  # 30 minutes
REQUIRE_MFA=true

# Monitoring
DATADOG_API_KEY=${DATADOG_API_KEY}
DATADOG_ENV=production
DATADOG_SERVICE=scout-edge-functions
ENABLE_APM=true
APM_SAMPLE_RATE=0.1

# Performance
MAX_REQUEST_SIZE=10485760  # 10MB
REQUEST_TIMEOUT=30000  # 30 seconds
DATABASE_POOL_SIZE=20
DATABASE_MAX_CONNECTIONS=100

# Compliance
ENABLE_AUDIT_LOG=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years
GDPR_MODE=true
DATA_RETENTION_DAYS=365