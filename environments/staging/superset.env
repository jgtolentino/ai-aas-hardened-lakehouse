# Superset Environment Variables - Staging

# Core Settings
SUPERSET_ENV=staging
SECRET_KEY=${SUPERSET_SECRET_KEY}  # From secrets
SUPERSET_LOAD_EXAMPLES=false

# Database Connection (staging)
SQLALCHEMY_DATABASE_URI=postgresql://${DB_USER}:${DB_PASS}@${DB_HOST}:5432/superset

# Feature Flags
FEATURE_FLAGS={
  "ENABLE_TEMPLATE_PROCESSING": true,
  "ENABLE_PROXY_FIX": true,
  "ENABLE_CORS": true,
  "ENABLE_JAVASCRIPT_CONTROLS": false,
  "DASHBOARD_NATIVE_FILTERS": true,
  "DASHBOARD_CROSS_FILTERS": true,
  "GENERIC_CHART_AXES": true,
  "ALERT_REPORTS": true
}

# Security Settings
WTF_CSRF_ENABLED=true
WTF_CSRF_TIME_LIMIT=604800  # 1 week
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# Cache Configuration
CACHE_TYPE=redis
CACHE_REDIS_URL=redis://redis-staging:6379/1
CACHE_DEFAULT_TIMEOUT=300

# Logging
LOG_LEVEL=INFO
LOG_FORMAT='%(asctime)s:%(levelname)s:%(name)s:%(message)s'
ENABLE_CORS_LOGGING=true

# Celery Configuration
CELERY_BROKER_URL=redis://redis-staging:6379/2
CELERY_RESULT_BACKEND=redis://redis-staging:6379/3

# CORS Settings
CORS_OPTIONS={
  "supports_credentials": true,
  "allow_headers": ["Content-Type", "Authorization"],
  "resources": ["/api/*", "/superset/*"],
  "origins": ["https://scout-staging.example.com"]
}

# Performance Settings
SQLLAB_TIMEOUT=600
SUPERSET_WEBSERVER_TIMEOUT=600
SQL_MAX_ROW=50000

# Email Configuration
SMTP_HOST=smtp-staging.example.com
SMTP_PORT=587
SMTP_STARTTLS=true
SMTP_SSL=false
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_MAIL_FROM=superset-staging@example.com

# Monitoring
SENTRY_DSN=${SENTRY_DSN_STAGING}