erDiagram
    %% GOLD LAYER - Scout Analytics Platform
    kpi_daily_summary {
        uuid id
        date date
        uuid store_id
        decimal total_revenue
        integer total_transactions
        integer unique_customers
        decimal average_transaction_value
        integer items_sold
        decimal gross_margin
        text top_category
        text top_product_sku
        text weather_condition
        boolean is_holiday
        timestamptz created_at
    }
    product_performance {
        uuid id
        text product_sku
        text product_name
        text category
        text brand
        text time_period
        date period_start
        date period_end
        integer units_sold
        decimal gross_revenue
        decimal gross_margin
        decimal margin_percentage
        decimal inventory_turns
        integer stockout_days
        integer velocity_rank
        text abc_classification
        timestamptz created_at
    }
    customer_segments {
        uuid id
        uuid customer_id
        text segment_name
        decimal segment_score
        decimal lifetime_value
        integer recency_days
        integer frequency_score
        integer monetary_score
        text rfm_segment
        date predicted_next_purchase_date
        decimal churn_probability
        jsonb recommended_actions
        date segment_date
        timestamptz created_at
    }
    store_performance {
        uuid id
        uuid store_id
        text time_period
        date period_start
        date period_end
        decimal total_revenue
        decimal revenue_growth_percentage
        integer total_transactions
        decimal transaction_growth_percentage
        decimal average_basket_size
        decimal conversion_rate
        decimal customer_satisfaction_score
        decimal staff_productivity_score
        integer region_rank
        text performance_tier
        timestamptz created_at
    }
    market_basket_analysis {
        uuid id
        text product_a_sku
        text product_b_sku
        integer support_count
        decimal confidence
        decimal lift
        decimal conviction
        date analysis_period_start
        date analysis_period_end
        decimal minimum_support_threshold
        boolean is_significant
        timestamptz created_at
    }